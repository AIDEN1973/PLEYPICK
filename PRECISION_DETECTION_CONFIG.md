# BrickBox 정밀 누락 부품 검출 설정

**목적**: 누락 부품 검출의 정밀도 최대화 (False Positive 최소화)  
**적용 일시**: 2025년 10월 31일

---

## 1. 임계값 설정 (정밀 모드)

### 1.1 YOLO 검출 필터링
- **신뢰도 임계값**: 0.85 이상
- **최대 검출 개수**: 5개
- **이유**: 낮은 신뢰도 검출은 제외하여 False Positive 방지

### 1.2 AI 메타데이터 매칭
- **벡터 유사도 임계값**: 0.85 이상
- **이유**: BOM 부품과 실제 검출 객체 간 높은 유사도 필요

### 1.3 BOM 매칭 점수 계산

#### 개별 검증
- **YOLO 신뢰도**: ≥ 0.85 (필수)
- **벡터 유사도**: ≥ 0.85 (필수)
- **최종 점수**: ≥ 0.80 (필수)

#### 최종 매칭
- **combinedScore**: ≥ 0.85
- **이유**: 다중 검증을 통한 정밀도 보장

---

## 2. 검증 단계

### 2.1 1차 검증: YOLO 신뢰도
```
YOLO 신뢰도 < 0.85 → 매칭 실패
```

### 2.2 2차 검증: 벡터 유사도
```
벡터 유사도 < 0.85 → 매칭 실패
```

### 2.3 3차 검증: 최종 점수
```
최종 점수 = (YOLO 신뢰도 × 0.3) + (벡터 유사도 × 0.7)
최종 점수 < 0.80 → 매칭 실패
```

### 2.4 4차 검증: 개별 재검증
```
YOLO 신뢰도 < 0.85 OR 벡터 유사도 < 0.85 → 매칭 실패
```

### 2.5 5차 검증: Combined Score
```
combinedScore = (hybridScore × 0.6) + (bomScore × 0.4)
combinedScore < 0.85 → 매칭 실패
```

---

## 3. 수량 제한

### 3.1 매칭 시도 횟수
- **최대 시도 횟수**: 2개 (기존 3개에서 감소)
- **이유**: 과도한 매칭 시도 방지

---

## 4. 검출 결과 처리

### 4.1 검출 결과 없음
- **처리**: 매칭 단계 건너뛰고 누락 슬롯만 반환
- **이유**: False Positive 방지

---

## 5. 예상 효과

### 5.1 정밀도 향상
- False Positive: 약 90% 감소 예상
- True Positive: 약 5-10% 감소 가능 (정밀도 우선)

### 5.2 거짓 매칭 방지
- 부품이 실제로 없으면 매칭되지 않음
- 높은 신뢰도의 검출만 허용

---

## 6. 주의 사항

### 6.1 임계값 조정
- 현재 설정은 누락 부품 검출에 최적화됨
- 일반 검출과는 다른 정밀도 기준 적용

### 6.2 성능 영향
- 더 엄격한 필터링으로 인해 처리 시간 증가 없음
- 오히려 매칭 시도 횟수 감소로 성능 향상 가능

---

**설정 완료**: 2025년 10월 31일













