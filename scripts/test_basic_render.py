#!/usr/bin/env python3 """ BrickBox ê¸°ë³¸ ë Œë”ë§ í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ LDraw ì—†ì´ ê¸°ë³¸ ë„í˜•ìœ¼ë¡œ ë Œë”ë§ íŒŒì´í”„ë¼ì¸ í…ŒìŠ¤íŠ¸ - ê¸°ë³¸ íë¸Œ ìƒì„± - ì¬ì§ˆ ë° ì¡°ëª… ì„¤ì • - ë Œë”ë§ í…ŒìŠ¤íŠ¸ """ import bpy import bmesh import os import sys import math import mathutils from mathutils import Vector, Euler import random def clear_scene(): """ì”¬ ì´ˆê¸°í™”""" bpy.ops.object.select_all(action='SELECT') bpy.ops.object.delete(use_global=False) def setup_camera(): """ì¹´ë©”ë¼ ì„¤ì •""" bpy.ops.object.camera_add(location=(0, -5, 2)) camera = bpy.context.object camera.name = "TestCamera" camera.rotation_euler = (math.radians(60), 0, 0) bpy.context.scene.camera = camera def setup_lighting(): """ì¡°ëª… ì„¤ì •""" # í‚¤ ë¼ì´íŠ¸ bpy.ops.object.light_add(type='SUN', location=(2, -2, 5)) key_light = bpy.context.object key_light.name = "KeyLight" key_light.data.energy = 3.0 # í•„ ë¼ì´íŠ¸ bpy.ops.object.light_add(type='AREA', location=(-2, -1, 3)) fill_light = bpy.context.object fill_light.name = "FillLight" fill_light.data.energy = 1.5 def setup_render_settings(): """ë Œë”ë§ ì„¤ì •""" bpy.context.scene.render.engine = 'CYCLES' bpy.context.scene.render.resolution_x = 640 bpy.context.scene.render.resolution_y = 640 bpy.context.scene.cycles.samples = 32 bpy.context.scene.render.image_settings.file_format = 'WEBP' bpy.context.scene.render.image_settings.quality = 80 # WebP Q80 í’ˆì§ˆ ì„¤ì • bpy.context.scene.render.image_settings.color_mode = 'RGB' def create_test_cube(): """í…ŒìŠ¤íŠ¸ìš© íë¸Œ ìƒì„±""" bpy.ops.mesh.primitive_cube_add(location=(0, 0, 0)) cube = bpy.context.object cube.name = "TestCube" # íë¸Œ í¬ê¸° ì¡°ì • (LEGO ë¶€í’ˆ í¬ê¸°ì™€ ìœ ì‚¬í•˜ê²Œ) cube.scale = (1, 1, 0.3) print(" í…ŒìŠ¤íŠ¸ íë¸Œ ìƒì„± ì™„ë£Œ") return cube def apply_random_material(obj): """ëœë¤ ì¬ì§ˆ ì ìš©""" material = bpy.data.materials.new(name="TestMaterial") material.use_nodes = True nodes = material.node_tree.nodes nodes.clear() bsdf = nodes.new(type='ShaderNodeBsdfPrincipled') output = nodes.new(type='ShaderNodeOutputMaterial') material.node_tree.links.new(bsdf.outputs['BSDF'], output.inputs['Surface']) # ëœë¤ ìƒ‰ìƒ colors = [ (0.8, 0.1, 0.1, 1.0), # ë¹¨ê°• (0.1, 0.3, 0.8, 1.0), # íŒŒë‘ (0.1, 0.7, 0.2, 1.0), # ì´ˆë¡ (0.9, 0.8, 0.1, 1.0), # ë…¸ë‘ (0.95, 0.95, 0.95, 1.0) # í°ìƒ‰ ] color = random.choice(colors) bsdf.inputs['Base Color'].default_value = color bsdf.inputs['Metallic'].default_value = 0.0 bsdf.inputs['Roughness'].default_value = 0.3 if obj.data.materials: obj.data.materials[0] = material else: obj.data.materials.append(material) print(f" ì¬ì§ˆ ì ìš© ì™„ë£Œ: {color}") return color def apply_random_rotation(obj): """ëœë¤ íšŒì „ ì ìš©""" rotation_x = random.uniform(0, 2 * math.pi) rotation_y = random.uniform(0, 2 * math.pi) rotation_z = random.uniform(0, 2 * math.pi) obj.rotation_euler = (rotation_x, rotation_y, rotation_z) print(f" íšŒì „ ì ìš©: ({math.degrees(rotation_x):.1f}Â°, {math.degrees(rotation_y):.1f}Â°, {math.degrees(rotation_z):.1f}Â°)") return (rotation_x, rotation_y, rotation_z) def render_image(output_path): """ì´ë¯¸ì§€ ë Œë”ë§""" bpy.context.scene.render.filepath = output_path bpy.ops.render.render(write_still=True) print(f" ë Œë”ë§ ì™„ë£Œ: {output_path}") def main(): """ë©”ì¸ ì‹¤í–‰ í•¨ìˆ˜""" print(" BrickBox ê¸°ë³¸ ë Œë”ë§ í…ŒìŠ¤íŠ¸ ì‹œì‘") # ì¶œë ¥ ë””ë ‰í† ë¦¬ ìƒì„± (ì ˆëŒ€ ê²½ë¡œ ì‚¬ìš©) output_dir = os.path.abspath("./output/test") os.makedirs(output_dir, exist_ok=True) print(f"ğŸ“ ì¶œë ¥ ë””ë ‰í† ë¦¬: {output_dir}") # ì”¬ ì´ˆê¸°í™” clear_scene() # ë Œë”ë§ ì„¤ì • setup_render_settings() setup_camera() setup_lighting() # í…ŒìŠ¤íŠ¸ íë¸Œ ìƒì„± cube = create_test_cube() # ëœë¤ ì¬ì§ˆ ì ìš© color = apply_random_material(cube) # ëœë¤ íšŒì „ ì ìš© rotation = apply_random_rotation(cube) # ë Œë”ë§ output_path = os.path.join(output_dir, "test_cube.png") render_image(output_path) print(" ê¸°ë³¸ ë Œë”ë§ í…ŒìŠ¤íŠ¸ ì™„ë£Œ!") print(f"ğŸ“ ì¶œë ¥ íŒŒì¼: {output_path}") print(f" ë Œë”ë§ ì •ë³´:") print(f" - ìƒ‰ìƒ: {color}") print(f" - íšŒì „: {rotation}") print(f" - í•´ìƒë„: 640x640") print(f" - ì—”ì§„: Cycles") if __name__ == "__main__": main() 