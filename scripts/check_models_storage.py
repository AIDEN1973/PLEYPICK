#!/usr/bin/env python3 """ Supabase Storageì˜ models ë²„í‚· ìƒíƒœ í™•ì¸ """ import os from supabase import create_client, Client def load_env(): """í™˜ê²½ ë³€ìˆ˜ ë¡œë“œ""" env_vars = {} try: with open('.env', 'r', encoding='utf-8') as f: for line in f: line = line.strip() if line and not line.startswith('#') and '=' in line: key, value = line.split('=', 1) env_vars[key] = value except FileNotFoundError: print(" .env íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.") return None return env_vars def check_storage_buckets(supabase: Client): """ëª¨ë“  Storage ë²„í‚· í™•ì¸""" try: buckets = supabase.storage.list_buckets() print(f" ì‚¬ìš© ê°€ëŠ¥í•œ ë²„í‚·: {[bucket.name for bucket in buckets]}") for bucket in buckets: print(f"\n ë²„í‚· '{bucket.name}' ë‚´ìš©:") try: files = supabase.storage.from_(bucket.name).list() if files: for file_info in files: print(f" - {file_info.get('name', 'unknown')} ({file_info.get('size', 0)} bytes)") else: print(" ğŸ“­ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.") except Exception as e: print(f" íŒŒì¼ ëª©ë¡ ì¡°íšŒ ì‹¤íŒ¨: {e}") return buckets except Exception as e: print(f" ë²„í‚· ëª©ë¡ ì¡°íšŒ ì‹¤íŒ¨: {e}") return [] def main(): """ë©”ì¸ í•¨ìˆ˜""" print(" Supabase Storage ìƒíƒœ í™•ì¸") print("=" * 50) # í™˜ê²½ ë³€ìˆ˜ ë¡œë“œ env_vars = load_env() if not env_vars: return SUPABASE_URL = env_vars.get('VITE_SUPABASE_URL') SUPABASE_KEY = env_vars.get('VITE_SUPABASE_SERVICE_ROLE_KEY') or env_vars.get('VITE_SUPABASE_ANON_KEY') if not SUPABASE_URL or not SUPABASE_KEY: print(" Supabase í™˜ê²½ ë³€ìˆ˜ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.") return # Supabase í´ë¼ì´ì–¸íŠ¸ ìƒì„± supabase = create_client(SUPABASE_URL, SUPABASE_KEY) # Storage ë²„í‚· í™•ì¸ buckets = check_storage_buckets(supabase) # models ë²„í‚·ì´ ìˆëŠ”ì§€ í™•ì¸ models_bucket = None for bucket in buckets: if bucket.name == 'models': models_bucket = bucket break if models_bucket: print(f"\n 'models' ë²„í‚· ë°œê²¬!") print(f" - ê³µê°œ: {models_bucket.public}") print(f" - íŒŒì¼ ìˆ˜: {models_bucket.file_size_limit}") else: print(f"\n 'models' ë²„í‚·ì´ ì—†ìŠµë‹ˆë‹¤.") print(" Supabase ëŒ€ì‹œë³´ë“œì—ì„œ 'models' ë²„í‚·ì„ ìƒì„±í•˜ì„¸ìš”.") if __name__ == "__main__": main() 