#!/usr/bin/env python3 """ Colab λ…ΈνΈλ¶μ Supabase μ„¤μ •μ„ λ™μ μΌλ΅ μ—…λ°μ΄νΈν•λ” μ¤ν¬λ¦½νΈ Edge Functionμ—μ„ μ „λ‹¬λ°›μ€ API ν‚¤λ¥Ό μ‚¬μ©ν•λ„λ΅ μμ • """ import json import re def update_colab_notebook(): """Colab λ…ΈνΈλ¶μ Supabase μ„¤μ •μ„ μ—…λ°μ΄νΈ""" notebook_path = "scripts/brickbox_yolo_automated_training_auto.ipynb" # λ…ΈνΈλ¶ μ½κΈ° with open(notebook_path, 'r', encoding='utf-8') as f: notebook = json.load(f) # μƒλ΅μ΄ Supabase μ„¤μ • μ…€ μ¶”κ°€ new_cell = { "cell_type": "code", "execution_count": None, "metadata": {}, "outputs": [], "source": [ "# Supabase μ„¤μ • (Edge Functionμ—μ„ μ „λ‹¬λ°›μ€ κ°’ μ‚¬μ©)\n", "import os\n", "from supabase import create_client, Client\n", "from datetime import datetime\n", "import json\n", "\n", "# Edge Functionμ—μ„ μ „λ‹¬λ°›μ€ μ„¤μ • μ‚¬μ©\n", "SUPABASE_URL = os.getenv('SUPABASE_URL', 'https://npferbxuxocbfnfbpcnz.supabase.co')\n", "SUPABASE_ANON_KEY = os.getenv('SUPABASE_ANON_KEY', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5wZmVyYnh1eG9jYmZuZmJwY256Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk0NzQ5ODUsImV4cCI6MjA3NTA1MDk4NX0.eqKQh_o1k2VmP-_v__gUMHVOgvdIzml-zDhZyzfxUmk')\n", "SUPABASE_SERVICE_KEY = os.getenv('SUPABASE_SERVICE_KEY', '')\n", "\n", "# Supabase ν΄λΌμ΄μ–ΈνΈ μƒμ„± (anon key μ‚¬μ©)\n", "supabase: Client = create_client(SUPABASE_URL, SUPABASE_ANON_KEY)\n", "\n", "print(\" Supabase μ—°κ²° μ™„λ£\")\n", "print(f\" URL: {SUPABASE_URL}\")\n", "print(f\"π”‘ Anon Key: {SUPABASE_ANON_KEY[:20]}...\")\n" ] } # κΈ°μ΅΄ Supabase μ„¤μ • μ…€ μ°Ύμ•„μ„ κµμ²΄ for i, cell in enumerate(notebook['cells']): if cell['cell_type'] == 'code' and 'supabase' in ''.join(cell.get('source', [])).lower(): # κΈ°μ΅΄ μ…€μ„ μƒ μ…€λ΅ κµμ²΄ notebook['cells'][i] = new_cell break else: # κΈ°μ΅΄ μ…€μ΄ μ—†μΌλ©΄ μ²« λ²μ§Έ μ…€ λ’¤μ— μ¶”κ°€ notebook['cells'].insert(1, new_cell) # λ…ΈνΈλ¶ μ €μ¥ with open(notebook_path, 'w', encoding='utf-8') as f: json.dump(notebook, f, indent=2, ensure_ascii=False) print(" Colab λ…ΈνΈλ¶ Supabase μ„¤μ • μ—…λ°μ΄νΈ μ™„λ£!") if __name__ == "__main__": update_colab_notebook() 